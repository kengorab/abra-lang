import macro, Expr, InjectedCode from "meta"

@macro
func one(): InjectedCode = InjectedCode.new().append("123")

val x = one() + one()
/// Expect: 246
stdoutWriteln("$x")

@macro
func makeTuple(*values: Expr[]): InjectedCode {
  val c = InjectedCode.new()
    .append("(")
  for v, idx in values {
    c.appendExpr(v)
    if idx != values.length {
      c.append(", ")
    }
  }

  c.append(")")
}

val t1 = makeTuple(1, "two", false)
/// Expect: (1, "two", false)
stdoutWriteln("$t1")

val t2 = makeTuple(1, "two", false, 4)
/// Expect: (1, "two", false, 4)
stdoutWriteln("$t2")
